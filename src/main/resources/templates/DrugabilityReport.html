<html>
    <h3>Drugability report (Node {{node.getName()}}: {{node.getBiomoleculeID}})</h3>
    <h4>Desired effect: {{node.getSign()}}</h4>
    {%if bundle is null %}
    <p>
        Protein name could not be found.
    </p>
    {% else %}
    <p>
        Protein: <a href="{{bundle.getProtein().getUniProtURL()}}">{{bundle.getProtein().getName()}}</a>
        <br />
        {% if bundle.getProtein().getFunctionDescription() is not null %}
        Function: {{bundle.getProtein().getFunctionDescription()}}
        {% else %}
        No function specified in UniProt.
        {% endif %}
    </p>
    <h4>Known drug interactions</h4>
    {% if bundle.getAllInteractions() is empty %}
    <p>
        No known drug interactions.
    </p>
    {% else %}
    <p>
        Known drug interactions (effect: {{node.getSign()}})
        <ul>
            {% for interaction in bundle.getAllInteractionsOfSign(node.getSign()) %}
            <li><a href="{{interaction.getDrug().getDrugBankURL()}}">{{interaction.getDrug().getName()}}</a> ({{interaction.getDrugActionType().getDescription()}})</li>
            {% endfor %}
        </ul>
        ({{bundle.getAllInteractionsNotOfSign(node.getSign()).size()}} other interactions are known. See <a href="{{bundle.getProtein().getDrugBankBioDBURL()}}">DrugBank BioDB page</a> for details.)
    </p>
    {% endif %}
    <h4>Drugability predictions</h4>
    <p>
        {% if bundle.hasDrugableLigand() %}
        DrugFEATURE predicted drugable ligands:
        <table>
            <tr>
                <td>PDB ID</td>
                <td>Chain</td>
                <td>Index</td>
                <td>Ligand</td>
                <td>Score</td>
            </tr>
            {% for ligand in bundle.getDrugableLigands() %}
            <tr>
                <td><a href="{{ligand.getPDBURL()}}">{{ligand.getPDBID()}}</a></td>
                <td>{{ligand.getChain()}}</td>
                <td>{{ligand.getIndex()}}</td>
                <td>{{ligand.getLigandName()}}</td>
                <td>{{ligand.getScore()}}</td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
        No drugable ligands predicted by DrugFEATURE.
        {% endif %}
    </p>
    <p>
        {% if bundle.getDrProdisPredictions() is not null %}
        DR.PRODIS binding predictions:
        <table>
            <tr>
                <td>NCBI RefSeq</td>
                <td>Novel bindings predicted</td>
                <td>Known bindings predicted</td>
                <td>DR.PRODIS details page</td>
            </tr>
            {% for prediction in bundle.getDrProdisPredictions() %}
            <tr>
                <td>{{prediction.getRefSeqID()}}</td>
                <td>{{prediction.getCountOfNovelBindingDrugs()}}</td>
                <td>{{prediction.getCountOfKnownBindingDrugs()}}</td>
                <td><a href="{{prediction.getDrProdisURL()}}">{{prediction.getDrProdisURL()}}</a></td>
            </tr>
            {% endfor %}
        </table>
        (Note that all access to the DR.PRODIS web service is subject to restrictions on commercial use.
        See the <a href="http://cssb.biology.gatech.edu/repurpose">home page</a> for details.)
        {% else %}
        No DR.PRODIS predictions were found.
        {% endif %}
    {% endif %}
</html>
